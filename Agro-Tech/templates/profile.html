{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}

<div class="container bg-secondary text-light mt-5 p-5 rounded shadow">
    <ion-icon name="person-circle-outline" style="font-size: 50px; color: #ffffff;"></ion-icon>
    <h3>Welcome, {{ username }}</h3>

    <!-- Edit & Password Collapse Buttons -->
    <div class="d-inline-flex gap-2 mb-3">
        <a class="btn btn-primary" data-bs-toggle="collapse" href="#Edit-profile" role="button">Edit Profile</a>
        <a class="btn btn-primary" data-bs-toggle="collapse" href="#change-password" role="button">Change Password</a>
    </div>

    <!-- Edit Profile Section -->
    <div class="collapse" id="Edit-profile">
        <div class="card card-body bg-secondary border border-secondary shadow-lg text-white">
            <form class="row g-3" method="POST" action="">
                <div class="col-md-4">
                    <label for="validationDefault01" class="form-label">Name</label>
                    <input type="text" class="form-control" id="validationDefault01" name="name" value="{{ name }}" required>
                </div>
                <div class="col-md-4">
                    <label for="validationDefaultUsername" class="form-label">Username</label>
                    <div class="input-group">
                        <span class="input-group-text">@</span>
                        <input type="text" class="form-control" id="validationDefaultUsername" name="username" value="{{ username }}" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="validationDefault03" class="form-label">City</label>
                    <input type="text" class="form-control" id="validationDefault03" name="city" value="{{ city }}" required>
                </div>
                <div class="col-md-3">
                    <label for="validationDefault04" class="form-label">State</label>
                    <select class="form-select" id="validationDefault04" name="state" required>
                        <option disabled value="">Choose...</option>
                        {% for state in ['Kerala', 'Tamil-Nadu', 'Delhi', 'Karnataka', 'Punjab'] %}
                            <option value="{{ state }}" {% if state == state %} selected {% endif %}>{{ state }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="validationDefault05" class="form-label">Zip</label>
                    <input type="text" class="form-control" id="validationDefault05" name="zip" value="{{ zip }}" required>
                </div>
                <div class="col-12">
                    <button class="btn btn-light" type="submit">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Change Password Section -->
    <div class="collapse mt-3" id="change-password">
        <div class="card card-body bg-secondary border border-secondary shadow-lg text-white">
            <form method="POST">
                <div class="mb-3">
                    <label for="inputPassword5" class="form-label">New Password</label>
                    <input type="password" id="inputPassword5" name="new_password" class="form-control" required>
                    <div id="passwordHelpBlock" class="form-text text-white">
                        Your password must be 8â€“20 characters long, contain letters and numbers, and not include spaces or special characters.
                    </div>
                </div>
                <button class="btn btn-light" type="submit">Save Changes</button>
            </form>
        </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="my-3">
        <a href="{{ url_for('routes.dashboard') }}" class="btn btn-outline-light me-2">Dashboard</a>
        <a href="{{ url_for('routes.logout') }}" class="btn btn-danger">Logout</a>
    </div>

    <!-- User Info Card -->
    <div class="card text-dark shadow-sm mt-4">
        <div class="card-header bg-light">
            User Details
        </div>
        <div class="card-body">
            <p><strong>Name:</strong> {{ name }}</p>
            <p><strong>Username:</strong> {{ username }}</p>
            <p><strong>City:</strong> {{ city }}</p>
            <p><strong>State:</strong> {{ state}}</p>
            <p><strong>Zip:</strong> {{ zip }}</p>
            <a href="{{ url_for('home') }}" class="btn btn-primary mt-2">Home</a>
        </div>
    </div>
</div>

{% endblock %}
