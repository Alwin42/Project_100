<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8086 Microprocessor Trainer Kit</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #279c2c; /* Darker green for the board */
            font-family: 'Roboto Mono', monospace; /* Monospace for retro feel */
            color: #ecf0f1; /* Light text for contrast */
            padding: 20px;
        }

        .board-container {
            position: relative;
            width: 1200px; /* Fixed width to mimic a board */
            height: 800px; /* Fixed height */
            background-color: #4CAF50; /* PCB Green */
            border: 5px solid #2e7d32; /* Darker border */
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            margin: 20px auto;
            overflow: hidden; /* Ensure elements stay within the board */
            padding: 20px;
        }

        .chip-label {
            position: absolute;
            font-size: 0.8em;
            color: rgba(255,255,255,0.7);
            background-color: rgba(0,0,0,0.3);
            padding: 2px 5px;
            border-radius: 3px;
        }

        /* Generic component box styling */
        .component-box {
            background-color: #263238; /* Dark grey for components */
            border: 2px solid #546e7a;
            border-radius: 5px;
            padding: 10px;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
            color: #a7d9b9; /* Light green text on components */
            position: absolute; /* Allows positioning on the board */
        }

        .code-editor-box {
            top: 30px;
            left: 30px;
            width: 550px;
            height: 400px;
        }

        #codeInput {
            background-color: #1a1a1a;
            color: #00ff00; /* Classic terminal green text */
            border: 1px solid #004d00;
            font-family: 'Roboto Mono', monospace;
            height: calc(100% - 40px); /* Adjust height for button */
            resize: none;
            box-shadow: inset 0 0 5px rgba(0,255,0,0.3);
        }

        .run-button-area {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }

        #runButton {
            background-color: #007bff;
            border-color: #007bff;
            width: 100px;
        }

        .register-display {
            top: 30px;
            left: 600px;
            width: 280px;
            height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }

        .register-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2px 0;
            border-bottom: 1px dashed rgba(255,255,255,0.1);
        }
        .register-line:last-child { border-bottom: none; }

        .register-name {
            font-weight: bold;
            color: #00ff00; /* Green text for register names */
            width: 40px;
            text-align: right;
            padding-right: 5px;
        }

        .register-value {
            flex-grow: 1;
            background-color: #000000; /* Black background for value */
            color: #00ff00; /* Green LED-like digits */
            padding: 2px 5px;
            border-radius: 3px;
            text-align: center;
            font-size: 1.1em;
            letter-spacing: 2px; /* Spaced out digits */
            border: 1px solid #004d00;
            box-shadow: inset 0 0 8px rgba(0,255,0,0.5);
        }

        .flags-display {
            top: 300px;
            left: 600px;
            width: 280px;
            height: 100px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .flag-led {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #330000; /* Dark red for off LED */
            border: 1px solid #660000;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            color: rgba(255,255,255,0.4);
            font-weight: bold;
        }

        .flag-led.active {
            background-color: #ff0000; /* Bright red for on LED */
            box-shadow: 0 0 10px #ff0000, inset 0 0 5px rgba(255,255,255,0.5);
            color: #ffffff;
            text-shadow: 0 0 5px #ff0000;
        }

        .log-display {
            top: 450px;
            left: 30px;
            width: 550px;
            height: 100px;
            overflow-y: auto;
        }

        #outputLog {
            background-color: #1a1a1a;
            color: #00ff00;
            border: 1px solid #004d00;
            font-family: 'Roboto Mono', monospace;
            height: 100%;
            overflow-y: auto;
            box-shadow: inset 0 0 5px rgba(0,255,0,0.3);
        }

        /* Power LED simulation */
        .power-led {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #003300; /* Dark green for off */
            border: 1px solid #006600;
            position: absolute;
            top: 10px;
            right: 10px;
            box-shadow: inset 0 0 3px rgba(0,0,0,0.5);
        }
        .power-led.on {
            background-color: #00ff00; /* Bright green for on */
            box-shadow: 0 0 8px #00ff00, inset 0 0 3px rgba(255,255,255,0.5);
        }

        /* Minor details to enhance PCB feel */
        .connecting-lines {
            position: absolute;
            z-index: -1;
            opacity: 0.1;
            /* You can add more detailed lines here if desired */
        }
        .text-center.title-area {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: #ecf0f1;
            text-shadow: 0 0 5px rgba(0,0,0,0.5);
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="board-container  mt-4 p-4 mb-4">
        <div class="text-center title-area mb-4">
            <h4>8086 Microprocessor Trainer Kit Simulator</h4>
        </div>
        
        <div id="powerLed" class="power-led on"></div>

        <div class="component-box code-editor-box mt-4">
            <div class="chip-label" style="top: -20px; left: 10px;">CODE EDITOR</div>
            <textarea id="codeInput" class="form-control" rows="15" placeholder="Enter 8086 assembly code...&#10;Ex:&#10;MOV AX, 1234h&#10;MOV BX, 5678h&#10;ADD AX, BX"></textarea>
            <div class="run-button-area">
                <button id="runButton" class="btn btn-primary">Run</button>
            </div>
        </div>

        <div class="component-box register-display mt-4">
            <div class="chip-label" style="top: -20px; left: 10px;">REGISTERS</div>
            <div class="register-line"><span class="register-name">AX:</span> <span id="reg-ax" class="register-value">0000</span></div>
            <div class="register-line"><span class="register-name">BX:</span> <span id="reg-bx" class="register-value">0000</span></div>
            <div class="register-line"><span class="register-name">CX:</span> <span id="reg-cx" class="register-value">0000</span></div>
            <div class="register-line"><span class="register-name">DX:</span> <span id="reg-dx" class="register-value">0000</span></div>
            <div class="register-line"><span class="register-name">SP:</span> <span id="reg-sp" class="register-value">0000</span></div>
            <div class="register-line"><span class="register-name">BP:</span> <span id="reg-bp" class="register-value">0000</span></div>
            <div class="register-line"><span class="register-name">SI:</span> <span id="reg-si" class="register-value">0000</span></div>
            <div class="register-line"><span class="register-name">DI:</span> <span id="reg-di" class="register-value">0000</span></div>
            <div class="register-line"><span class="register-name">IP:</span> <span id="reg-ip" class="register-value">0000</span></div>
        </div>

        <div class="component-box flags-display">
            <div class="chip-label" style="top: -20px; left: 10px;">FLAGS</div>
            <div id="flag-cf" class="flag-led">CF</div>
            <div id="flag-zf" class="flag-led">ZF</div>
            <div id="flag-sf" class="flag-led">SF</div>
            <div id="flag-of" class="flag-led">OF</div>
            <div id="flag-pf" class="flag-led">PF</div>
            <div id="flag-df" class="flag-led">DF</div>
            <div id="flag-if" class="flag-led">IF</div>
            </div>

        <div class="component-box log-display">
            <div class="chip-label" style="top: -20px; left: 10px;">OUTPUT LOG</div>
            <div id="outputLog" class="alert alert-secondary" role="alert">Ready to execute.</div>
        </div>

        <div class="component-box" style="top: 500px; left: 600px; width: 150px; height: 80px; text-align: center; display: flex; align-items: center; justify-content: center; font-size: 0.9em;">
            <div class="chip-label" style="top: -20px; left: 10px;">CPU 8086</div>
            <span style="color:#FFF;">UMC UM8086</span>
        </div>
        <div class="component-box" style="top: 500px; left: 780px; width: 150px; height: 80px; text-align: center; display: flex; align-items: center; justify-content: center; font-size: 0.9em;">
             <div class="chip-label" style="top: -20px; left: 10px;">MEMORY</div>
            <span style="color:#FFF;">SRAM x2</span>
        </div>

    </div>

    <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>